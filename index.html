<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<title>顏文字宇宙｜可可愛愛一鍵複製</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { 
  font-family: system-ui, sans-serif; 
  max-width: 720px; 
  margin:auto; 
  padding:20px; 
  background:#f7f7f7; 
  line-height:1.8; 
}

h1 { text-align:center; margin-bottom:10px; }

/* 搜尋框 */
#searchInput {
  width:100%; 
  padding:8px; 
  margin-bottom:10px; 
  font-size:1rem;
  border-radius:6px;
  border:1px solid #ccc;
}

/* 分類按鈕 */
.nav-buttons {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 8px;
  margin-bottom: 10px;
}

.nav-buttons button { 
  padding:8px 16px; 
  border:none; 
  border-radius:6px; 
  cursor:pointer; 
  background:#333; 
  color:#fff; 
  font-weight:bold; 
}

.nav-buttons button.active { background:#007acc; }
.nav-buttons button:hover { opacity:0.8; }

/* 顏文字容器 */
#kaomoji-container {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: center;
}

.kaomoji {
  background:#fff;
  padding:8px 10px;
  border-radius:6px;
  cursor:pointer;
  text-align:center;
  font-size:1.3rem;
  white-space: nowrap;
  transition: transform 0.2s, background 0.2s;
}

.kaomoji:hover {
  background:#eaeaea;
  transform: scale(1.1);
}

/* 響應式字型 */
@media (max-width: 768px) and (min-width: 481px) { .kaomoji { font-size:1.1rem; } }
@media (max-width: 480px) { .kaomoji { font-size:0.9rem; } }

/* Toast 動畫 */
#copy-toast {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%) scale(0.7);
  background: #333;
  color: #fff;
  padding: 10px 16px;
  border-radius: 20px;
  font-size: 14px;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease, transform 0.3s ease;
  z-index: 9999;
}

#copy-toast.show {
  opacity: 1;
  transform: translateX(-50%) scale(1);
}
</style>
</head>
<body>

<h1>顏文字宇宙</h1>
<p style="text-align:center;">點擊顏文字即可複製</p>

<!-- 搜尋框 -->
<input type="text" id="searchInput" placeholder="搜尋顏文字...">

<!-- 分類按鈕 -->
<div class="nav-buttons" id="nav-buttons"></div>

<!-- 排序選單 -->
<select id="sortSelect" style="margin-bottom:10px; padding:6px; font-size:1rem; width:100%;">
  <option value="最新">最新</option>
  <option value="熱門">熱門</option>
  <option value="隨機">隨機</option>
</select>

<!-- 顯示顏文字區塊 -->
<div id="kaomoji-container"></div>

<!-- Toast -->
<div id="copy-toast">已複製</div>

<script>
// -------------------- 顯示顏文字 --------------------
const toast = document.getElementById('copy-toast');
const navButtons = document.getElementById('nav-buttons');
const kaomojiContainer = document.getElementById('kaomoji-container');
const searchInput = document.getElementById('searchInput');
const sortSelect = document.getElementById('sortSelect');

let categories = {};
let clickCount = {}; // 熱門計數
let sortMode = "最新";

// 測試資料（可改成 Google Sheets）
categories = {
  "可愛": ["(*^_^*)","(*≧ω≦*)","(｡♥‿♥｡)","(*´∀`*)"],
  "生氣": ["(╯°□°）╯︵ ┻━┻","ಠ_ಠ","(；￣Д￣)"],
  "哭哭": ["(╥﹏╥)","｡：ﾟ(｡ﾉω＼｡)ﾟ･｡","(;´༎ຶД༎ຶ`)"]
};

// 顯示分類按鈕
Object.keys(categories).forEach((cat,i)=>{
  const btn = document.createElement("button");
  btn.textContent = cat;
  btn.dataset.cat = cat;
  if(i===0) btn.classList.add("active");
  btn.addEventListener("click",()=>showCategory(cat,btn));
  navButtons.appendChild(btn);
});

// -------------------- 顯示顏文字 --------------------
function showCategory(cat, btn){
  kaomojiContainer.innerHTML = "";
  document.querySelectorAll(".nav-buttons button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");

  let kaomojiList = [...categories[cat]];

  // 排序
  if(sortMode === "隨機"){
    kaomojiList.sort(()=>Math.random()-0.5);
  } else if(sortMode === "熱門"){
    kaomojiList.sort((a,b)=>(clickCount[b]||0)-(clickCount[a]||0));
  }

  // 搜尋過濾
  const keyword = searchInput.value.trim();
  if(keyword) kaomojiList = kaomojiList.filter(k=>k.includes(keyword));

  kaomojiList.forEach(k=>{
    const div = document.createElement("div");
    div.className = "kaomoji";
    div.textContent = k;
    div.title = `${cat} 顏文字 ${k}`;
    div.addEventListener("click", ()=>{
      navigator.clipboard.writeText(k);
      toast.textContent = '已複製：' + k;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"),1500);

      // 熱門計數
      clickCount[k] = (clickCount[k]||0)+1;
    });
    kaomojiContainer.appendChild(div);
  });
}

// -------------------- 搜尋框事件 --------------------
searchInput.addEventListener("input", ()=>{
  const activeCatBtn = document.querySelector(".nav-buttons button.active");
  if(activeCatBtn) showCategory(activeCatBtn.dataset.cat, activeCatBtn);
});

// -------------------- 排序選單事件 --------------------
sortSelect.addEventListener("change", ()=>{
  sortMode = sortSelect.value;
  const activeCatBtn = document.querySelector(".nav-buttons button.active");
  if(activeCatBtn) showCategory(activeCatBtn.dataset.cat, activeCatBtn);
});

// -------------------- 預設顯示第一個分類 --------------------
const firstCatBtn = document.querySelector(".nav-buttons button");
if(firstCatBtn) showCategory(firstCatBtn.dataset.cat, firstCatBtn);
</script>

</body>
</html>
